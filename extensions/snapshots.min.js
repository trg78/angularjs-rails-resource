/**
 * A resource factory inspired by $resource from AngularJS
 * @version v2.3.1 - 2018-02-11
 * @link https://github.com/FineLinePrototyping/angularjs-rails-resource.git
 * @author 
 */

angular.module("rails").factory("RailsResourceSnapshotsMixin",["RailsResourceInjector",function(s){function t(){}return t.configure=function(t,n){t.snapshotSerializer=s.getService(n.snapshotSerializer)},t.extended=function(s){s.intercept("afterResponse",function(s,t,n){n&&n.hasOwnProperty("$$snapshots")&&angular.isArray(n.$$snapshots)&&(n.$$snapshots.length=0)}),s.include({snapshot:a,rollback:i,rollbackTo:r,unsnappedChanges:e,_prepSnapshot:n})},t;function n(){var s=this.constructor.config,t=(s.snapshotSerializer||s.serializer).serialize(this);return delete t.$$snapshots,t}function a(s){var t=this._prepSnapshot();return t.$rollbackCallback=s,this.$$snapshots||(this.$$snapshots=[]),this.$$snapshots.push(t),this.$$snapshots.length-1}function r(s){var t,n,a=this.constructor.config,r=this.$$snapshots,i=this.$$snapshots?this.$$snapshots.length:0;return!(!angular.isArray(r)||0===i||!angular.isNumber(s)||(t=r.splice(Math.max(0,Math.min(s,i-1))),!angular.isArray(t)||0===t.length||(n=t[0].$rollbackCallback,angular.extend(this,(a.snapshotSerializer||a.serializer).deserialize(t[0])),this.$$snapshots=r,delete this.$rollbackCallback,angular.isFunction(n)&&n.call(this),0)))}function i(s){var t=this.$$snapshots?this.$$snapshots.length:0;return(s=Math.min(s||1,t))<0&&(s=t),t&&this.rollbackTo(this.$$snapshots.length-s),!0}function e(){if(!this.$$snapshots)return!0;var s=this._prepSnapshot(),t=this.$$snapshots[this.$$snapshots.length-1];return!angular.equals(s,t)}}]);